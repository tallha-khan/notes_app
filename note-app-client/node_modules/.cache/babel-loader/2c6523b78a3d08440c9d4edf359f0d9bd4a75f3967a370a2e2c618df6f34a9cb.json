{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../services/api\";import\"../Dashboard.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[notes,setNotes]=useState([]);const[note,setNote]=useState({title:\"\",content:\"\"});const[email,setEmail]=useState(\"\");const[name,setName]=useState(\"\");const getHeaders=()=>({Authorization:`Bearer ${localStorage.getItem(\"token\")}`});const fetchNotes=async()=>{try{const res=await api.get(\"/notes\",{headers:getHeaders()});setNotes(res.data);}catch(err){console.error(\"‚ùå Error fetching notes:\",err);}};const handleAdd=async e=>{e.preventDefault();try{await api.post(\"/notes\",note,{headers:getHeaders()});setNote({title:\"\",content:\"\"});fetchNotes();}catch(err){console.error(\"‚ùå Error adding note:\",err);}};const handleDelete=async id=>{try{await api.delete(`/notes/${id}`,{headers:getHeaders()});fetchNotes();}catch(err){console.error(\"‚ùå Error deleting note:\",err);}};useEffect(()=>{const token=localStorage.getItem(\"token\");if(!token){window.location.href=\"/\";}else{fetchNotes();api.get(\"/auth/me\",{headers:getHeaders()}).then(res=>{console.log(\"üßæ /auth/me response:\",res.data);// Add this\nsetEmail(res.data.email);setName(res.data.name);}).catch(err=>{console.error(\"‚ùå Failed to load user\",err);localStorage.removeItem(\"token\");window.location.href=\"/\";});}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCDD My Notes\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDC4B Welcome, \",name,\" (\",email,\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:()=>{localStorage.removeItem(\"token\");window.location.href=\"/\";},children:\"\\uD83D\\uDEAA Logout\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"note-form\",onSubmit:handleAdd,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:note.title,onChange:e=>setNote({...note,title:e.target.value}),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:note.content,onChange:e=>setNote({...note,content:e.target.value}),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u2795 Add Note\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-grid\",children:notes.map(n=>/*#__PURE__*/_jsxs(\"div\",{className:\"note-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:n.title}),/*#__PURE__*/_jsx(\"p\",{children:n.content}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(n._id),children:\"\\uD83D\\uDDD1 Delete\"})]},n._id))})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Dashboard","notes","setNotes","note","setNote","title","content","email","setEmail","name","setName","getHeaders","Authorization","localStorage","getItem","fetchNotes","res","get","headers","data","err","console","error","handleAdd","e","preventDefault","post","handleDelete","id","delete","token","window","location","href","then","log","catch","removeItem","className","children","onClick","onSubmit","type","placeholder","value","onChange","target","required","map","n","_id"],"sources":["C:/Users/Lenovo/Desktop/Project/note-app-client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from \"../services/api\";\r\nimport \"../Dashboard.css\";\r\n\r\nfunction Dashboard() {\r\n  const [notes, setNotes] = useState([]);\r\n  const [note, setNote] = useState({ title: \"\", content: \"\" });\r\n  const [email, setEmail] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const getHeaders = () => ({\r\n    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n  });\r\n\r\n  const fetchNotes = async () => {\r\n    try {\r\n      const res = await api.get(\"/notes\", { headers: getHeaders() });\r\n      setNotes(res.data);\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error fetching notes:\", err);\r\n    }\r\n  };\r\n\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await api.post(\"/notes\", note, { headers: getHeaders() });\r\n      setNote({ title: \"\", content: \"\" });\r\n      fetchNotes();\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error adding note:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await api.delete(`/notes/${id}`, { headers: getHeaders() });\r\n      fetchNotes();\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error deleting note:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      window.location.href = \"/\";\r\n    } else {\r\n      fetchNotes();\r\n      api\r\n        .get(\"/auth/me\", { headers: getHeaders() })\r\n        .then((res) => {\r\n          console.log(\"üßæ /auth/me response:\", res.data); // Add this\r\n          setEmail(res.data.email);\r\n          setName(res.data.name);\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"‚ùå Failed to load user\", err);\r\n          localStorage.removeItem(\"token\");\r\n          window.location.href = \"/\";\r\n        });\r\n    }\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <div className=\"header\">\r\n        <h2>üìù My Notes</h2>\r\n        <div className=\"user-info\">\r\n          <span>üëã Welcome, {name} ({email})</span>\r\n          <button\r\n            className=\"logout-btn\"\r\n            onClick={() => {\r\n              localStorage.removeItem(\"token\");\r\n              window.location.href = \"/\";\r\n            }}\r\n          >\r\n            üö™ Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <form className=\"note-form\" onSubmit={handleAdd}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          value={note.title}\r\n          onChange={(e) => setNote({ ...note, title: e.target.value })}\r\n          required\r\n        />\r\n        <textarea\r\n          placeholder=\"Content\"\r\n          value={note.content}\r\n          onChange={(e) => setNote({ ...note, content: e.target.value })}\r\n          required\r\n        />\r\n        <button type=\"submit\">‚ûï Add Note</button>\r\n      </form>\r\n\r\n      <div className=\"notes-grid\">\r\n        {notes.map((n) => (\r\n          <div key={n._id} className=\"note-card\">\r\n            <h3>{n.title}</h3>\r\n            <p>{n.content}</p>\r\n            <button onClick={() => handleDelete(n._id)}>üóë Delete</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}